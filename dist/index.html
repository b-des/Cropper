<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
          crossorigin="anonymous">

    <link rel="stylesheet" href="styles.min.css">
</head>
<body>
<div id="app" style="width: auto; margin: 0 auto">
    <button class="btn btn-primary" onclick="addPhoto()">Добавить фото</button>
</div>

</body>


<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
<script src="main.js"></script>

<!-- Bootstrap tooltips -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script>
    imgs = [
        //{url: 'https://pechat.photo/image/cache/customer/authorized/c9f0f895fb98ab9159f51fd0297e236d/Ася_c44eb61d7a8aee3715b086f59000f78c-127x180-height.jpg',  "resolution":"3508x4961"},
        {
            url: 'https://xn--80aj0aafqej6a4c.xn--80asehdb/image/order/4830-0eac1ad8dd8e/4830-79083123728/glossy/10x15//1//glossy_10x15ebb90f7646c43797e8a00f0ac1f4a233.jpeg',
            thumbnail: 'https://xn--80aj0aafqej6a4c.xn--80asehdb/image/order/4830-0eac1ad8dd8e/4830-79083123728/glossy/10x15//1//glossy_10x15ebb90f7646c43797e8a00f0ac1f4a233.jpeg',
            params: {
                my_param: 'value of my param'
            },
            resolution: '3024x4032'
        },
        {
            url: 'https://assets.macroplant.com/assets/adapter/adapter-icon-hero-3977e6dc1fc7e2e44df058ea75dcbbb299bdf7b7953fccea23b0a0aefbb1958c.png',
            thumbnail: 'https://assets.macroplant.com/assets/adapter/adapter-icon-hero-3977e6dc1fc7e2e44df058ea75dcbbb299bdf7b7953fccea23b0a0aefbb1958c.png',
            params: {
                some_custom_param: 'value of custom param'
            },
            resolution: '28.35x28.35'
        }
    ];

    function addPhoto() {
        cropper.addPhotos([imgs[Math.floor(Math.random() * ((imgs.length - 1) - 0 + 1) + 0)]])
    }

    let options = [{"option_id":"96","name":"Тип печати","label":"photoid","option_values":[{"option_value_id":"397","relation_options":[{"option_id":"9","option_value_id":["20","22","23","103","353"]},{"option_id":"10","option_value_id":["26"]},{"option_id":"11","option_value_id":["31","32"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"82","option_value_id":["341","342","343"]}],"name":"Лаборатория","value":"","price":"0.0000"},{"option_value_id":"398","relation_options":[{"option_id":"9","option_value_id":["20","21","22","23","103","353"]},{"option_id":"10","option_value_id":["28","38"]},{"option_id":"11","option_value_id":["31","32"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"82","option_value_id":["343"]}],"name":"Фотопринтеры","value":"","price":"0.0000"}]},{"option_id":"9","name":"Формат бумаги","label":"size","option_values":[{"option_value_id":"20","relation_options":[{"option_id":"10","option_value_id":["26","28","38"]},{"option_id":"11","option_value_id":["31","32"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"82","option_value_id":["341","342","343"]},{"option_id":"96","option_value_id":["397","398"]}],"name":"A6 (10x15)","value":["102","152"],"price":"5.0000"},{"option_value_id":"21","relation_options":[{"option_id":"10","option_value_id":["26","28","38"]},{"option_id":"11","option_value_id":["31","32"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"82","option_value_id":["341","342","343"]},{"option_id":"96","option_value_id":["398"]}],"name":"A12 (13x18)","value":["130","180"],"price":"11.0000"},{"option_value_id":"22","relation_options":[{"option_id":"10","option_value_id":["26","28","38"]},{"option_id":"11","option_value_id":["31","32"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"82","option_value_id":["341","342","343"]},{"option_id":"96","option_value_id":["397","398"]}],"name":"A5 (15x20)","value":["152","210"],"price":"15.0000"},{"option_value_id":"103","relation_options":[{"option_id":"11","option_value_id":["31","32"]},{"option_id":"10","option_value_id":["38"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"82","option_value_id":["341","342","343"]},{"option_id":"96","option_value_id":["397","398"]}],"name":"152x216","value":["152","216"],"price":"18.0000"},{"option_value_id":"353","relation_options":[{"option_id":"11","option_value_id":["31","32"]},{"option_id":"10","option_value_id":["38"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"82","option_value_id":["341","342","343"]},{"option_id":"96","option_value_id":["397","398"]}],"name":"15x15","value":["152","152"],"price":"19.0000"},{"option_value_id":"23","relation_options":[{"option_id":"10","option_value_id":["26","38"]},{"option_id":"11","option_value_id":["31","32"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"82","option_value_id":["341","342","343"]},{"option_id":"96","option_value_id":["397","398"]}],"name":"203х305мм ","value":["203","305"],"price":"31.0000"}]},{"option_id":"11","name":"Тип бумаги","label":"simple","option_values":[{"option_value_id":"32","relation_options":[{"option_id":"9","option_value_id":["20","21","22","23","103","353"]},{"option_id":"10","option_value_id":["26","28","38"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"82","option_value_id":["341","342","343"]},{"option_id":"96","option_value_id":["397","398"]}],"name":"Матовая","value":"","price":"4.0000"},{"option_value_id":"31","relation_options":[{"option_id":"9","option_value_id":["20","21","22","23","103","353"]},{"option_id":"10","option_value_id":["26","28","38"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"82","option_value_id":["341","342","343"]},{"option_id":"96","option_value_id":["397","398"]}],"name":"Глянец","value":"","price":"5.0000"}]},{"option_id":"79","name":"Кадрирование","label":"framing","option_values":[{"option_value_id":"329","relation_options":[{"option_id":"9","option_value_id":["20","21","22","23","103","353"]},{"option_id":"10","option_value_id":["26","28","38"]},{"option_id":"11","option_value_id":["31","32"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"82","option_value_id":["341","342","343"]},{"option_id":"96","option_value_id":["397","398"]}],"name":"Кадр целиком","label":"whole","value":"","price":"0.0000"},{"option_value_id":"330","relation_options":[{"option_id":"9","option_value_id":["20","21","22","23","103","353"]},{"option_id":"10","option_value_id":["26","28","38"]},{"option_id":"11","option_value_id":["31","32"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"82","option_value_id":["341","342","343"]},{"option_id":"96","option_value_id":["397","398"]}],"name":"Кадр в обрез","label":"cropp","value":"","price":"0.0000"}]},{"option_id":"10","name":"Плотность в гм","label":"simple","option_values":[{"option_value_id":"28","relation_options":[{"option_id":"9","option_value_id":["20","21","22"]},{"option_id":"11","option_value_id":["31","32"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"82","option_value_id":["341","342","343"]},{"option_id":"96","option_value_id":["398"]}],"name":"230гм","value":"","price":"2.0000"},{"option_value_id":"26","relation_options":[{"option_id":"9","option_value_id":["20","21","22","23"]},{"option_id":"11","option_value_id":["31","32"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"82","option_value_id":["341","342","343"]},{"option_id":"96","option_value_id":["397"]}],"name":"200гм","value":"","price":"1.0000"},{"option_value_id":"38","relation_options":[{"option_id":"9","option_value_id":["20","21","22","23","103","353"]},{"option_id":"11","option_value_id":["31","32"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"82","option_value_id":["341","342","343"]},{"option_id":"96","option_value_id":["398"]}],"name":"160-180гр","value":"","price":"0.0000"}]},{"option_id":"82","name":"Цвет рамки","label":"border-select","option_values":[{"option_value_id":"343","relation_options":[{"option_id":"9","option_value_id":["20","21","22","23","103","353"]},{"option_id":"10","option_value_id":["26","28","38"]},{"option_id":"11","option_value_id":["31","32"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"96","option_value_id":["397","398"]}],"name":"Без рамки","label":"none","value":"","price":"0.0000"},{"option_value_id":"341","relation_options":[{"option_id":"9","option_value_id":["20","21","22","23","103","353"]},{"option_id":"10","option_value_id":["26","28","38"]},{"option_id":"11","option_value_id":["31","32"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"96","option_value_id":["397"]}],"name":"Белая","label":"white","value":"","price":"0.0000"},{"option_value_id":"342","relation_options":[{"option_id":"9","option_value_id":["20","21","22","23","103","353"]},{"option_id":"10","option_value_id":["26","28","38"]},{"option_id":"11","option_value_id":["31","32"]},{"option_id":"77","option_value_id":["308","309"]},{"option_id":"79","option_value_id":["329","330"]},{"option_id":"96","option_value_id":["397"]}],"name":"Черная","label":"black","value":"","price":"0.0000"}]}];
    let copperParams = {
        container: 'app',
        handlerUrl: 'https://3352.pechat55.ru',
        dest: ['C:/Node/Cropper/dist', 'uploads/12334'],
        immediate: false,
        itemsPerPage: 1,
        borderWidth: 10,//толщина рамки по умолчанию
        defaultOptions: [
            //{option_id: 9, option_value_id: 3},
            //{option_id: 10, option_value_id: 2},
            //{option_id: 12, option_value_id: 2}
        ],
        options: options
    };
    let cropper = new Cropper(copperParams);

    let items = [];
    for (let i = 0; i <= 0; i++) {
        //items.push(imgs[Math.floor(Math.random() * ((imgs.length - 1) - 0 + 1) + 0)]);
    }


    cropper.addPhotos([imgs[0]]);



    cropper.onDeleteAllPhotos((res) => {
        console.log('onDeleteAllPhotos');
    });

    cropper.onProcessingStart((data) => {
        console.log(data);
    });

    cropper.onPropertiesChanged(data => {

    });


    /* c.process([{"border":"#c93333","borderThickness":"29","crop":{"x":"31.34715025906736","y":"28.756476683937827","w":"65.41450777202073","h":"42.61658031088083"},"dest":["C:/Node/Cropper/dist","uploads/12334"],"left":"-121","original":"false","quantity":"1","rotate":"90","size":{"width":"152","height":"102"},"thumbnail":"image\/photobox\/uploads\/tmp\/sisadmin_typical_4aad3e2ff46c64676ace26dacdd3b929-ua28q5t-rotated.png?v=1573655414035","top":"-111","url":"https:\/\/pechat.photo\/image\/customer\/authorized\/d3d9446802a44259755d38e6d163e820\/sisadmin_typical_4aad3e2ff46c64676ace26dacdd3b929.png","zoom":"1.61"}], (res) => {
         console.log(res);
     });*/


    cropper.onImagesProcessed((items) => {
        console.log(JSON.stringify(items.photos));
    });


</script>
</html>
