<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
          crossorigin="anonymous">

    <link rel="stylesheet" href="styles.min.css">
</head>
<body>
<div id="app" style="width: auto; margin: 0 auto">
    <button class="btn btn-primary" onclick="addPhoto()">Добавить фото</button>
</div>

</body>


<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
<script src="main.js"></script>

<!-- Bootstrap tooltips -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script>
    imgs = [
        {url: 'https://images.pexels.com/photos/1236701/pexels-photo-1236701.jpeg'},
        {
            url: 'https://cdn.pixabay.com/photo/2016/11/14/04/45/elephant-1822636__340.jpg',
            thumbnail: 'https://cdn.pixabay.com/photo/2016/11/14/04/45/elephant-1822636__340.jpg'
        },
        {
            url: 'https://assets.macroplant.com/assets/adapter/adapter-icon-hero-3977e6dc1fc7e2e44df058ea75dcbbb299bdf7b7953fccea23b0a0aefbb1958c.png',
            thumbnail: 'https://assets.macroplant.com/assets/adapter/adapter-icon-hero-3977e6dc1fc7e2e44df058ea75dcbbb299bdf7b7953fccea23b0a0aefbb1958c.png'
        },
        'https://images.pexels.com/photos/556416/pexels-photo-556416.jpeg',
        'https://c4.wallpaperflare.com/wallpaper/410/867/750/vector-forest-sunset-forest-sunset-forest-wallpaper-thumb.jpg',
        'https://rog.asus.com/media/1554200908315.jpg',
        'https://cdn.guidingtech.com/media/assets/2019/07/Best-Star-Wars-HD-and-4K-Wallpapers-for-Phone-and-PC-9.jpg',
        'https://esossl-a.akamaihd.net/assets/img/cms/media/56274c7523aff0fa1744819a554d7af4_the-halls-of-the-colossus_wallpaper-1920x1080.jpg',
        'https://images3.alphacoders.com/675/675273.jpg',
    ];

    function addPhoto() {
        c.addPhotos([imgs[Math.floor(Math.random() * ((imgs.length - 1) - 0 + 1) + 0)]])
    }

    let c = new Cropper({
        container: 'app',
        handlerUrl: 'http://localhost:5567',
        dest: ['C:/Node/Cropper/dist', 'uploads/12334'],
        immediate: true,
        itemsPerPage: 8,
        sizes: [
            {"title": "10x15", "value": [10, 15]},
            {"title": "10x20", "value": [10, 20]}
        ],
        "options": [
            {
                "option_id": "9",
                "name": "Формат бумаги",
                "label": "size",
                "option_values": [
                    {
                        "option_value_id": "1",
                        "name": "A6 (10x15)",
                        "value": [
                            10,
                            15
                        ]
                    },
                    {
                        "option_value_id": "2",
                        "name": "A5 (20x15)",
                        "value": [
                            20,
                            15
                        ]
                    }
                ]
            },
            {
                "option_id": "10",
                "name": "Бумага",
                "label": "paper",
                "option_values": [
                    {
                        "option_value_id": "1",
                        "label":"embossed",
                        "name": "Тиснёная"
                    },
                    {
                        "option_value_id": "2",
                        "label":"glossy",
                        "name": "Глянцевая"
                    }
                ]
            },
            {
                "option_id": "11",
                "name": "Кадрирование",
                "label": "framing",
                "option_values": [
                    {
                        "option_value_id": 1,
                        "label": "whole",
                        "name": "Кадр целиком"
                    },
                    {
                        "option_value_id": 2,
                        "label": "cropp",
                        "name": "Кадр в обрез"
                    }
                ]
            },
            {
                "option_id": "12",
                "name": "Рамка",
                "label": "border-select",
                "option_values": [
                    {
                        "option_value_id": "1",
                        "label": "black",
                        "name": "Черная"
                    },
                    {
                        "option_value_id": "2",
                        "label": "white",
                        "name": "Белая"
                    },
                    {
                        "option_value_id": "3",
                        "label": "none",
                        "name": "Без рамки"
                    }
                ]
            },
        ]
    });

    //overwrite sizes
    c.setPhotoSizes([
        {"title": "10x15", "value": [10, 15]},
        {"title": "20x25", "value": [20, 25]}
    ]);

    let items = [];
    for (let i = 0; i <= 1; i++) {
        items.push(imgs[Math.floor(Math.random() * ((imgs.length - 1) - 0 + 1) + 0)]);
    }

   // c.addPhotos(items);
   // c.addPhotos([imgs[2]]);
   // c.addPhotos(['https://pechat.photo/image/customer/guest/3d685054081df4204c636b82034d7057/1234_f130b44b88b615463748e732de0a1fbf.jpg']);

    c.addPhotos([{"url":"https://images.pexels.com/photos/1236701/pexels-photo-1236701.jpeg","thumbnail":"https://images.pexels.com/photos/1236701/pexels-photo-1236701.jpeg","size":{"width":15,"height":20},"dest":["C:/Node/Cropper/dist","uploads/12334"],"paper":"","crop":{"x":0,"y":5.555555555555555,"w":100,"h":88.88888888888889},"original":false,"quantity":1,"rotate":0,"border":"black","borderThickness":"3","zoom":"0","top":-11.25,"left":0},{"url":"https://images.pexels.com/photos/556416/pexels-photo-556416.jpeg","thumbnail":"https://images.pexels.com/photos/556416/pexels-photo-556416.jpeg","size":{"width":15,"height":20},"dest":["C:/Node/Cropper/dist","uploads/12334"],"paper":"","crop":{"x":25.224820771097253,"y":0,"w":49.55637864009956,"h":100},"original":false,"quantity":1,"rotate":0,"border":"#15e531","borderThickness":"10","zoom":"0","top":0,"left":-68.7167},{"url":"https://assets.macroplant.com/assets/adapter/adapter-icon-hero-3977e6dc1fc7e2e44df058ea75dcbbb299bdf7b7953fccea23b0a0aefbb1958c.png","thumbnail":"https://assets.macroplant.com/assets/adapter/adapter-icon-hero-3977e6dc1fc7e2e44df058ea75dcbbb299bdf7b7953fccea23b0a0aefbb1958c.png","size":{"width":15,"height":20},"dest":["C:/Node/Cropper/dist","uploads/12334"],"paper":"","crop":{"x":12.731481481481483,"y":19.675925925925927,"w":52.083333333333336,"h":69.44444444444444},"original":false,"quantity":1,"rotate":0,"border":"#ce1c1c","borderThickness":"5","zoom":"1.44","top":-51,"left":-33},{"url":"https://pechat.photo/image/customer/guest/3d685054081df4204c636b82034d7057/1234_f130b44b88b615463748e732de0a1fbf.jpg","thumbnail":"https://pechat.photo/image/customer/guest/3d685054081df4204c636b82034d7057/1234_f130b44b88b615463748e732de0a1fbf.jpg","size":{"width":15,"height":20},"dest":["C:/Node/Cropper/dist","uploads/12334"],"paper":"","crop":{"x":26.55974469296829,"y":0,"w":46.880371709258355,"h":100},"original":false,"quantity":1,"rotate":0,"border":"black","borderThickness":"3","zoom":"0","top":0,"left":-76.4833}])
    c.onProcessingStart((data) => {
        console.log(data);
    });

    c.onImagesProcessed((items) => {
        console.log(JSON.stringify(items.photos));
    });

</script>
</html>
